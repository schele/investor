@using Investor.Models.PageModels
@using umbraco.NodeFactory
@using UCodeFirst.Factories

@inherits UmbracoViewPage<BaseModel>

@helper AboutInvestorPage()
{
    var aboutInvestorId = Umbraco.Field("aboutInvestor", recursive: true).ToString();
        
    if (!string.IsNullOrWhiteSpace(aboutInvestorId))
    {
        var aboutInvestorPage = ModelFactory.Instance.GetModel<BaseModel>(int.Parse(aboutInvestorId));

        <li><a href="@aboutInvestorPage.Url" title="@aboutInvestorPage.Name">@aboutInvestorPage.Name</a></li>
        foreach (var item in aboutInvestorPage.Children())
        {
            <li><a href="@item.Url" title="@item.Name">@item.Name</a></li>
        }
    }
}

@helper OurInvestmentsPage()
{
    var ourInvestmentsId = Umbraco.Field("ourInvestments", recursive: true).ToString();

    if (!string.IsNullOrWhiteSpace(ourInvestmentsId))
    {
        var ourInvestmentsPage = new Node(int.Parse(ourInvestmentsId));
        var investmentPages = ourInvestmentsPage.GetDescendantOrSelfNodes().Where(x => x.NodeTypeAlias == "InvestmentPageModel");

        <li><a href="@ourInvestmentsPage.Url" title="@ourInvestmentsPage.Name">@ourInvestmentsPage.Name</a></li>
        foreach (var item in investmentPages)
        {
            <li><a href="@item.Url" title="@item.Name">@item.Name</a></li>
        }
    }
}

@helper InvestorsAndMediaPage()
{
    var investorsAndMediaId = Umbraco.Field("investorsAndMedia", recursive: true).ToString();

    if (!string.IsNullOrWhiteSpace(investorsAndMediaId))
    {
        var investorsAndMediaPage = ModelFactory.Instance.GetModel<BaseModel>(int.Parse(investorsAndMediaId));

        <li><a href="@investorsAndMediaPage.Url" title="@investorsAndMediaPage.Name">@investorsAndMediaPage.Name</a></li>
        foreach (var item in investorsAndMediaPage.Children())
        {
            <li><a href="@item.Url" title="@item.Name">@item.Name</a></li>
        }
    }
}

<footer>
    <div class="introduction">
        <div class="container">
            @if (Model.StartPage.AdditionalMenu != null)
            {
                <ul class="main-actions">
                @foreach (var menu in Model.StartPage.AdditionalMenu)
                {
                    <li><a href="@menu.Link">@menu.Caption</a></li>
                }
                </ul>
            }
        </div>
    </div>
    <div class="introduction sitemap">
        <div class="container">
            <div class="columns">
                <div class="col-md-3 col-sm-4 footer-list">
                    <ul>
                        @AboutInvestorPage()
                    </ul>
                </div>
                <div class="col-md-3 col-sm-4 footer-list">
                    <ul>
                        @OurInvestmentsPage()
                    </ul>
                </div>
                <div class="col-md-3 col-sm-4 footer-list">
                    <ul>
                        @InvestorsAndMediaPage()
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="copyright">
            @Model.StartPage.Footer            
        </div>
    </div>
</footer>