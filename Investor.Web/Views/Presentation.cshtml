@using Investor.Helpers
@using Investor.Models.Extensions
@using Investor.Models.PageModels

@inherits UmbracoViewPage<PresentationPageModel>

@{
    Layout = "Master.cshtml";
    
    var videoUrl = string.Empty;
    
    if (Model.Movie != null)
    {
        videoUrl = Investor.Models.Extensions.StringExtensions.GetAbsoluteUrl(Model.Movie.Url);
    }
}

<div class="row">
    @Html.Partial("~/Views/Partials/SubNavigation.cshtml")
    <article class="col-md-7 list-presentations-page">
        @Html.Render(Model.Header, @<h1>@Model.Header</h1>)
        @Html.Render(Model.Preamble, @<p>@Model.Preamble</p>)
        @Html.Render(Model.RelatedLinksHeader, @<h2>@Model.RelatedLinksHeader</h2>)
        @Html.Render(Model.Movie, @<video class="responsive-video" controls><source src="@videoUrl" type="video/mp4">@Umbraco.GetDictionaryValue("System.Video.NoSupport")</video>)

        @if (Model.RelatedLinks.Any())
        {
            <ul>
                @foreach (var nodeLink in Model.RelatedLinks)
                {
                    switch (nodeLink.Type)
                    {
                        case "internalMedia":
                            <li class="list-presentations-page-internal-media">@Html.RelatedLink(nodeLink)</li>
                            break;
                        case "external":
                            <li class="list-presentations-page-external">@Html.RelatedLink(nodeLink)</li>
                            break;
                        default:
                            <li>@Html.RelatedLink(nodeLink)</li>
                            break;
                    }
                }
            </ul>
        }
    </article>
</div>