@using Investor.Helpers
@using Investor.Models.Extensions
@using Investor.Models.PageModels
@using MediaExtensions = Investor.Models.Extensions.MediaExtensions

@inherits UmbracoTemplatePage
@inherits UmbracoViewPage<ArticlePageModel>

@{
    var relatedDocuments = Umbraco.Field("relateradeDokument").ToString();

    //var body = Model.Body;
    //var s = body;
}

<div>
    @Html.Render(Model.Header, @<h1>@Model.Header</h1>)
    @Html.Render(Model.Preamble, @<p>@Model.Preamble</p>)
    @Html.Raw(Umbraco.Field("broedtext"))
</div>

@if (Model.RelatedLinks != null)
{
    <div>
        <ul>
            @foreach (var link in Model.RelatedLinks)
            {
                var target = link.NewWindow ? "_blank" : null;

                <li><a href="@link.Link" target="@target" title="@link.Caption">@link.Caption</a></li>
            }
        </ul>
    </div>
}

@if (!string.IsNullOrEmpty(relatedDocuments))
{
    <div>
        <ul>
            @{
                foreach (var d in relatedDocuments.Split(','))
                {
                    var document = MediaExtensions.GetMediaById(d);

                    <li><a href="@document.FriendlyUrl()" title="@document.Name">@document.Name</a></li>
                }
            }
        </ul>
    </div>
}