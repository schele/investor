@using Investor.Abstraction.Pressreleases
@using StructureMap
@using Umbraco.Web.Macros

@inherits PartialViewMacroPage
              
@{
    var pressReleaseRepository = ObjectFactory.GetInstance<IPressReleaseRepository>();
}

<div class="press-releases">
    <div class="press-releases-header">
        @if (Model.MacroParameters["Heading"] != null)
        {

            <h2><a href="">@(Model.MacroParameters["Heading"].ToString())</a></h2>
        }
    </div>
    <ul class="press-releases-list">
        @foreach (var pressRelease in pressReleaseRepository.GetPressReleases())
        {
            <li>
                <a href="/investors-media/press-releases/?id=@pressRelease.Id">
                    <span class="press-releases-date">@pressRelease.Published.ToString(Umbraco.GetDictionaryValue("DateFormat"))</span>
                    <span class="press-releases-time">@pressRelease.Published.ToString(Umbraco.GetDictionaryValue("TimeFormat"))</span>
                    <span class="press-releases-link-text">@pressRelease.Headline</span>                            
                </a>
            </li>
        }
    </ul>
</div>